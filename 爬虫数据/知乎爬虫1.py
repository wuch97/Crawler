import requestsfrom lxml import etreeimport jsonimport timeimport re
headers = {    'user-agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36',    'cookie':''}
def get_img(url):    res = requests.get(url,headers=headers)    i = 1    json_data = json.loads(res.text)    datas = json_data['data']    for data in datas:        id = data['author']['name']        content = data['content']        imgs = re.findall('img src="(.*?)"',content,re.S)        if len(imgs) == 0:            pass        else:            for img in imgs:                if 'jpg' in img:                    res_1 = requests.get(img,headers=headers)                    fp = open('row_img/' + id + '+' + str(i) + '.jpg','wb')                    fp.write(res_1.content)                    i = i + 1                    print(id,img)
if __name__ == '__main__':    urls = ['https://www.zhihu.com/commercial_api/banners_v3/question_down_sticky?question_token=285321190'.format(str(i)) for i in range(0,25000,5)]    for url in urls:        get_img(url)        time.sleep(2)